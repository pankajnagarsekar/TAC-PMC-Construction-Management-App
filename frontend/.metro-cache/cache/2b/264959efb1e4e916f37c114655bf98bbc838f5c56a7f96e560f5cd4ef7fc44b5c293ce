{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":81},"end":{"line":4,"column":102,"index":183}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":232},"end":{"line":6,"column":52,"index":284}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\"; // AUTH CONTEXT\n  // Provides authentication state and methods throughout the app\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [state, setState] = (0, _react.useState)({\n      user: null,\n      isLoading: true,\n      isAuthenticated: false\n    });\n\n    // Check for existing session on mount\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n    const checkAuthStatus = async () => {\n      console.log('Checking auth status...');\n      try {\n        const isAuth = await _servicesApi.authApi.isAuthenticated();\n        console.log('Is authenticated:', isAuth);\n        if (isAuth) {\n          const user = await _servicesApi.authApi.getCurrentUser();\n          console.log('Found user:', user?.email);\n          setState({\n            user,\n            isLoading: false,\n            isAuthenticated: !!user\n          });\n        } else {\n          console.log('No auth token found');\n          setState({\n            user: null,\n            isLoading: false,\n            isAuthenticated: false\n          });\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        setState({\n          user: null,\n          isLoading: false,\n          isAuthenticated: false\n        });\n      }\n    };\n    const login = (0, _react.useCallback)(async credentials => {\n      console.log('Login called with:', credentials.email);\n      setState(prev => ({\n        ...prev,\n        isLoading: true\n      }));\n      try {\n        console.log('Calling authApi.login...');\n        const response = await _servicesApi.authApi.login(credentials);\n        console.log('Login successful, user:', response.user?.email);\n        setState({\n          user: response.user,\n          isLoading: false,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        console.error('Login failed:', error);\n        setState(prev => ({\n          ...prev,\n          isLoading: false\n        }));\n        throw error;\n      }\n    }, []);\n    const logout = (0, _react.useCallback)(async () => {\n      setState(prev => ({\n        ...prev,\n        isLoading: true\n      }));\n      try {\n        await _servicesApi.authApi.logout();\n      } finally {\n        setState({\n          user: null,\n          isLoading: false,\n          isAuthenticated: false\n        });\n      }\n    }, []);\n    const checkCanLogout = (0, _react.useCallback)(async () => {\n      try {\n        const response = await _servicesApi.authApi.checkCanLogout();\n        return response;\n      } catch (error) {\n        console.error('Failed to check logout status:', error);\n        // On error, allow logout (fail-safe)\n        return {\n          can_logout: true\n        };\n      }\n    }, []);\n    const refreshUser = (0, _react.useCallback)(async () => {\n      const user = await _servicesApi.authApi.getCurrentUser();\n      setState(prev => ({\n        ...prev,\n        user\n      }));\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        ...state,\n        login,\n        logout,\n        refreshUser,\n        checkCanLogout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  var _default = AuthContext;\n});","lineCount":145,"map":[[4,63,1,0],[5,2,2,0],[6,2,2,0,"Object"],[6,8,2,0],[6,9,2,0,"defineProperty"],[6,23,2,0],[6,24,2,0,"exports"],[6,31,2,0],[7,4,2,0,"value"],[7,9,2,0],[8,2,2,0],[9,2,151,0,"Object"],[9,8,151,0],[9,9,151,0,"defineProperty"],[9,23,151,0],[9,24,151,0,"exports"],[9,31,151,0],[10,4,151,0,"enumerable"],[10,14,151,0],[11,4,151,0,"get"],[11,7,151,0],[11,18,151,0,"get"],[11,19,151,0],[12,6,151,0],[12,13,151,0,"_default"],[12,21,151,0],[13,4,151,0],[14,2,151,0],[15,2,35,0,"exports"],[15,9,35,0],[15,10,35,0,"AuthProvider"],[15,22,35,0],[15,25,35,0,"AuthProvider"],[15,37,35,0],[16,2,143,0,"exports"],[16,9,143,0],[16,10,143,0,"useAuth"],[16,17,143,0],[16,20,143,0,"useAuth"],[16,27,143,0],[17,2,4,0],[17,6,4,0,"_react"],[17,12,4,0],[17,15,4,0,"require"],[17,22,4,0],[17,23,4,0,"_dependencyMap"],[17,37,4,0],[18,2,6,0],[18,6,6,0,"_servicesApi"],[18,18,6,0],[18,21,6,0,"require"],[18,28,6,0],[18,29,6,0,"_dependencyMap"],[18,43,6,0],[19,2,6,52],[19,6,6,52,"_reactJsxDevRuntime"],[19,25,6,52],[19,28,6,52,"require"],[19,35,6,52],[19,36,6,52,"_dependencyMap"],[19,50,6,52],[20,2,29,0],[20,8,29,6,"AuthContext"],[20,19,29,17],[20,35,29,20],[20,39,29,20,"createContext"],[20,45,29,33],[20,46,29,33,"createContext"],[20,59,29,33],[20,61,29,63,"undefined"],[20,70,29,72],[20,71,29,73],[21,2,35,7],[21,11,35,16,"AuthProvider"],[21,23,35,28,"AuthProvider"],[21,24,35,29],[22,4,35,31,"children"],[23,2,35,59],[23,3,35,60],[23,5,35,62],[24,4,36,2],[24,10,36,8],[24,11,36,9,"state"],[24,16,36,14],[24,18,36,16,"setState"],[24,26,36,24],[24,27,36,25],[24,30,36,28],[24,34,36,28,"useState"],[24,40,36,36],[24,41,36,36,"useState"],[24,49,36,36],[24,51,36,48],[25,6,37,4,"user"],[25,10,37,8],[25,12,37,10],[25,16,37,14],[26,6,38,4,"isLoading"],[26,15,38,13],[26,17,38,15],[26,21,38,19],[27,6,39,4,"isAuthenticated"],[27,21,39,19],[27,23,39,21],[28,4,40,2],[28,5,40,3],[28,6,40,4],[30,4,42,2],[31,4,43,2],[31,8,43,2,"useEffect"],[31,14,43,11],[31,15,43,11,"useEffect"],[31,24,43,11],[31,26,43,12],[31,32,43,18],[32,6,44,4,"checkAuthStatus"],[32,21,44,19],[32,22,44,20],[32,23,44,21],[33,4,45,2],[33,5,45,3],[33,7,45,5],[33,9,45,7],[33,10,45,8],[34,4,47,2],[34,10,47,8,"checkAuthStatus"],[34,25,47,23],[34,28,47,26],[34,34,47,26,"checkAuthStatus"],[34,35,47,26],[34,40,47,38],[35,6,48,4,"console"],[35,13,48,11],[35,14,48,12,"log"],[35,17,48,15],[35,18,48,16],[35,43,48,41],[35,44,48,42],[36,6,49,4],[36,10,49,8],[37,8,50,6],[37,14,50,12,"isAuth"],[37,20,50,18],[37,23,50,21],[37,29,50,27,"authApi"],[37,41,50,34],[37,42,50,34,"authApi"],[37,49,50,34],[37,50,50,35,"isAuthenticated"],[37,65,50,50],[37,66,50,51],[37,67,50,52],[38,8,51,6,"console"],[38,15,51,13],[38,16,51,14,"log"],[38,19,51,17],[38,20,51,18],[38,39,51,37],[38,41,51,39,"isAuth"],[38,47,51,45],[38,48,51,46],[39,8,52,6],[39,12,52,10,"isAuth"],[39,18,52,16],[39,20,52,18],[40,10,53,8],[40,16,53,14,"user"],[40,20,53,18],[40,23,53,21],[40,29,53,27,"authApi"],[40,41,53,34],[40,42,53,34,"authApi"],[40,49,53,34],[40,50,53,35,"getCurrentUser"],[40,64,53,49],[40,65,53,50],[40,66,53,51],[41,10,54,8,"console"],[41,17,54,15],[41,18,54,16,"log"],[41,21,54,19],[41,22,54,20],[41,35,54,33],[41,37,54,35,"user"],[41,41,54,39],[41,43,54,41,"email"],[41,48,54,46],[41,49,54,47],[42,10,55,8,"setState"],[42,18,55,16],[42,19,55,17],[43,12,56,10,"user"],[43,16,56,14],[44,12,57,10,"isLoading"],[44,21,57,19],[44,23,57,21],[44,28,57,26],[45,12,58,10,"isAuthenticated"],[45,27,58,25],[45,29,58,27],[45,30,58,28],[45,31,58,29,"user"],[46,10,59,8],[46,11,59,9],[46,12,59,10],[47,8,60,6],[47,9,60,7],[47,15,60,13],[48,10,61,8,"console"],[48,17,61,15],[48,18,61,16,"log"],[48,21,61,19],[48,22,61,20],[48,43,61,41],[48,44,61,42],[49,10,62,8,"setState"],[49,18,62,16],[49,19,62,17],[50,12,63,10,"user"],[50,16,63,14],[50,18,63,16],[50,22,63,20],[51,12,64,10,"isLoading"],[51,21,64,19],[51,23,64,21],[51,28,64,26],[52,12,65,10,"isAuthenticated"],[52,27,65,25],[52,29,65,27],[53,10,66,8],[53,11,66,9],[53,12,66,10],[54,8,67,6],[55,6,68,4],[55,7,68,5],[55,8,68,6],[55,15,68,13,"error"],[55,20,68,18],[55,22,68,20],[56,8,69,6,"console"],[56,15,69,13],[56,16,69,14,"error"],[56,21,69,19],[56,22,69,20],[56,42,69,40],[56,44,69,42,"error"],[56,49,69,47],[56,50,69,48],[57,8,70,6,"setState"],[57,16,70,14],[57,17,70,15],[58,10,71,8,"user"],[58,14,71,12],[58,16,71,14],[58,20,71,18],[59,10,72,8,"isLoading"],[59,19,72,17],[59,21,72,19],[59,26,72,24],[60,10,73,8,"isAuthenticated"],[60,25,73,23],[60,27,73,25],[61,8,74,6],[61,9,74,7],[61,10,74,8],[62,6,75,4],[63,4,76,2],[63,5,76,3],[64,4,78,2],[64,10,78,8,"login"],[64,15,78,13],[64,18,78,16],[64,22,78,16,"useCallback"],[64,28,78,27],[64,29,78,27,"useCallback"],[64,40,78,27],[64,42,78,28],[64,48,78,35,"credentials"],[64,59,78,60],[64,63,78,65],[65,6,79,4,"console"],[65,13,79,11],[65,14,79,12,"log"],[65,17,79,15],[65,18,79,16],[65,38,79,36],[65,40,79,38,"credentials"],[65,51,79,49],[65,52,79,50,"email"],[65,57,79,55],[65,58,79,56],[66,6,80,4,"setState"],[66,14,80,12],[66,15,80,13,"prev"],[66,19,80,17],[66,24,80,22],[67,8,80,24],[67,11,80,27,"prev"],[67,15,80,31],[68,8,80,33,"isLoading"],[68,17,80,42],[68,19,80,44],[69,6,80,49],[69,7,80,50],[69,8,80,51],[69,9,80,52],[70,6,82,4],[70,10,82,8],[71,8,83,6,"console"],[71,15,83,13],[71,16,83,14,"log"],[71,19,83,17],[71,20,83,18],[71,46,83,44],[71,47,83,45],[72,8,84,6],[72,14,84,12,"response"],[72,22,84,20],[72,25,84,23],[72,31,84,29,"authApi"],[72,43,84,36],[72,44,84,36,"authApi"],[72,51,84,36],[72,52,84,37,"login"],[72,57,84,42],[72,58,84,43,"credentials"],[72,69,84,54],[72,70,84,55],[73,8,85,6,"console"],[73,15,85,13],[73,16,85,14,"log"],[73,19,85,17],[73,20,85,18],[73,45,85,43],[73,47,85,45,"response"],[73,55,85,53],[73,56,85,54,"user"],[73,60,85,58],[73,62,85,60,"email"],[73,67,85,65],[73,68,85,66],[74,8,86,6,"setState"],[74,16,86,14],[74,17,86,15],[75,10,87,8,"user"],[75,14,87,12],[75,16,87,14,"response"],[75,24,87,22],[75,25,87,23,"user"],[75,29,87,27],[76,10,88,8,"isLoading"],[76,19,88,17],[76,21,88,19],[76,26,88,24],[77,10,89,8,"isAuthenticated"],[77,25,89,23],[77,27,89,25],[78,8,90,6],[78,9,90,7],[78,10,90,8],[79,6,91,4],[79,7,91,5],[79,8,91,6],[79,15,91,13,"error"],[79,20,91,18],[79,22,91,20],[80,8,92,6,"console"],[80,15,92,13],[80,16,92,14,"error"],[80,21,92,19],[80,22,92,20],[80,37,92,35],[80,39,92,37,"error"],[80,44,92,42],[80,45,92,43],[81,8,93,6,"setState"],[81,16,93,14],[81,17,93,15,"prev"],[81,21,93,19],[81,26,93,24],[82,10,93,26],[82,13,93,29,"prev"],[82,17,93,33],[83,10,93,35,"isLoading"],[83,19,93,44],[83,21,93,46],[84,8,93,52],[84,9,93,53],[84,10,93,54],[84,11,93,55],[85,8,94,6],[85,14,94,12,"error"],[85,19,94,17],[86,6,95,4],[87,4,96,2],[87,5,96,3],[87,7,96,5],[87,9,96,7],[87,10,96,8],[88,4,98,2],[88,10,98,8,"logout"],[88,16,98,14],[88,19,98,17],[88,23,98,17,"useCallback"],[88,29,98,28],[88,30,98,28,"useCallback"],[88,41,98,28],[88,43,98,29],[88,55,98,41],[89,6,99,4,"setState"],[89,14,99,12],[89,15,99,13,"prev"],[89,19,99,17],[89,24,99,22],[90,8,99,24],[90,11,99,27,"prev"],[90,15,99,31],[91,8,99,33,"isLoading"],[91,17,99,42],[91,19,99,44],[92,6,99,49],[92,7,99,50],[92,8,99,51],[92,9,99,52],[93,6,101,4],[93,10,101,8],[94,8,102,6],[94,14,102,12,"authApi"],[94,26,102,19],[94,27,102,19,"authApi"],[94,34,102,19],[94,35,102,20,"logout"],[94,41,102,26],[94,42,102,27],[94,43,102,28],[95,6,103,4],[95,7,103,5],[95,16,103,14],[96,8,104,6,"setState"],[96,16,104,14],[96,17,104,15],[97,10,105,8,"user"],[97,14,105,12],[97,16,105,14],[97,20,105,18],[98,10,106,8,"isLoading"],[98,19,106,17],[98,21,106,19],[98,26,106,24],[99,10,107,8,"isAuthenticated"],[99,25,107,23],[99,27,107,25],[100,8,108,6],[100,9,108,7],[100,10,108,8],[101,6,109,4],[102,4,110,2],[102,5,110,3],[102,7,110,5],[102,9,110,7],[102,10,110,8],[103,4,112,2],[103,10,112,8,"checkCanLogout"],[103,24,112,22],[103,27,112,25],[103,31,112,25,"useCallback"],[103,37,112,36],[103,38,112,36,"useCallback"],[103,49,112,36],[103,51,112,37],[103,63,112,77],[104,6,113,4],[104,10,113,8],[105,8,114,6],[105,14,114,12,"response"],[105,22,114,20],[105,25,114,23],[105,31,114,29,"authApi"],[105,43,114,36],[105,44,114,36,"authApi"],[105,51,114,36],[105,52,114,37,"checkCanLogout"],[105,66,114,51],[105,67,114,52],[105,68,114,53],[106,8,115,6],[106,15,115,13,"response"],[106,23,115,21],[107,6,116,4],[107,7,116,5],[107,8,116,6],[107,15,116,13,"error"],[107,20,116,18],[107,22,116,20],[108,8,117,6,"console"],[108,15,117,13],[108,16,117,14,"error"],[108,21,117,19],[108,22,117,20],[108,54,117,52],[108,56,117,54,"error"],[108,61,117,59],[108,62,117,60],[109,8,118,6],[110,8,119,6],[110,15,119,13],[111,10,119,15,"can_logout"],[111,20,119,25],[111,22,119,27],[112,8,119,32],[112,9,119,33],[113,6,120,4],[114,4,121,2],[114,5,121,3],[114,7,121,5],[114,9,121,7],[114,10,121,8],[115,4,123,2],[115,10,123,8,"refreshUser"],[115,21,123,19],[115,24,123,22],[115,28,123,22,"useCallback"],[115,34,123,33],[115,35,123,33,"useCallback"],[115,46,123,33],[115,48,123,34],[115,60,123,46],[116,6,124,4],[116,12,124,10,"user"],[116,16,124,14],[116,19,124,17],[116,25,124,23,"authApi"],[116,37,124,30],[116,38,124,30,"authApi"],[116,45,124,30],[116,46,124,31,"getCurrentUser"],[116,60,124,45],[116,61,124,46],[116,62,124,47],[117,6,125,4,"setState"],[117,14,125,12],[117,15,125,13,"prev"],[117,19,125,17],[117,24,125,22],[118,8,125,24],[118,11,125,27,"prev"],[118,15,125,31],[119,8,125,33,"user"],[120,6,125,38],[120,7,125,39],[120,8,125,40],[120,9,125,41],[121,4,126,2],[121,5,126,3],[121,7,126,5],[121,9,126,7],[121,10,126,8],[122,4,128,2],[122,24,129,4],[122,28,129,4,"_reactJsxDevRuntime"],[122,47,129,4],[122,48,129,4,"jsxDEV"],[122,54,129,4],[122,56,129,5,"AuthContext"],[122,67,129,16],[122,68,129,17,"Provider"],[122,76,129,25],[123,6,130,6,"value"],[123,11,130,11],[123,13,130,13],[124,8,131,8],[124,11,131,11,"state"],[124,16,131,16],[125,8,132,8,"login"],[125,13,132,13],[126,8,133,8,"logout"],[126,14,133,14],[127,8,134,8,"refreshUser"],[127,19,134,19],[128,8,135,8,"checkCanLogout"],[129,6,136,6],[129,7,136,8],[130,6,136,8,"children"],[130,14,136,8],[130,16,138,7,"children"],[131,4,138,15],[132,6,138,15,"fileName"],[132,14,138,15],[132,16,138,15,"_jsxFileName"],[132,28,138,15],[133,6,138,15,"lineNumber"],[133,16,138,15],[134,6,138,15,"columnNumber"],[134,18,138,15],[135,4,138,15],[135,11,139,26],[135,12,139,27],[136,2,141,0],[137,2,143,7],[137,11,143,16,"useAuth"],[137,18,143,23,"useAuth"],[137,19,143,23],[137,21,143,26],[138,4,144,2],[138,10,144,8,"context"],[138,17,144,15],[138,20,144,18],[138,24,144,18,"useContext"],[138,30,144,28],[138,31,144,28,"useContext"],[138,41,144,28],[138,43,144,29,"AuthContext"],[138,54,144,40],[138,55,144,41],[139,4,145,2],[139,8,145,6,"context"],[139,15,145,13],[139,20,145,18,"undefined"],[139,29,145,27],[139,31,145,29],[140,6,146,4],[140,12,146,10],[140,16,146,14,"Error"],[140,21,146,19],[140,22,146,20],[140,67,146,65],[140,68,146,66],[141,4,147,2],[142,4,148,2],[142,11,148,9,"context"],[142,18,148,16],[143,2,149,0],[144,2,151,0],[144,6,151,0,"_default"],[144,14,151,0],[144,17,151,15,"AuthContext"],[144,28,151,26],[145,0,151,27],[145,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","login","setState$argument_0","logout","checkCanLogout","refreshUser","useAuth"],"mappings":"AAA;OCkC;YCQ;GDE;0BEE;GF6B;4BGE;aCE,sCD;eCa,uCD;GHG;6BKE;aDC,sCC;GLW;qCME;GNS;kCOE;aHE,2BG;GPC;CDe;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}