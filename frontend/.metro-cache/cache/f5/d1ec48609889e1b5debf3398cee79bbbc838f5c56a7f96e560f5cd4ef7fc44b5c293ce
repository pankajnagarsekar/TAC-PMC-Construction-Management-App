{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":81},"end":{"line":4,"column":102,"index":183}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":232},"end":{"line":6,"column":52,"index":284}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // AUTH CONTEXT\n  // Provides authentication state and methods throughout the app\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [state, setState] = (0, _react.useState)({\n      user: null,\n      isLoading: true,\n      isAuthenticated: false\n    });\n\n    // Check for existing session on mount\n    (0, _react.useEffect)(() => {\n      checkAuthStatus();\n    }, []);\n    const checkAuthStatus = async () => {\n      console.log('Checking auth status...');\n      try {\n        const isAuth = await _servicesApi.authApi.isAuthenticated();\n        console.log('Is authenticated:', isAuth);\n        if (isAuth) {\n          const user = await _servicesApi.authApi.getCurrentUser();\n          console.log('Found user:', user?.email);\n          setState({\n            user,\n            isLoading: false,\n            isAuthenticated: !!user\n          });\n        } else {\n          console.log('No auth token found');\n          setState({\n            user: null,\n            isLoading: false,\n            isAuthenticated: false\n          });\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        setState({\n          user: null,\n          isLoading: false,\n          isAuthenticated: false\n        });\n      }\n    };\n    const login = (0, _react.useCallback)(async credentials => {\n      console.log('Login called with:', credentials.email);\n      setState(prev => ({\n        ...prev,\n        isLoading: true\n      }));\n      try {\n        console.log('Calling authApi.login...');\n        const response = await _servicesApi.authApi.login(credentials);\n        console.log('Login successful, user:', response.user?.email);\n        setState({\n          user: response.user,\n          isLoading: false,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        console.error('Login failed:', error);\n        setState(prev => ({\n          ...prev,\n          isLoading: false\n        }));\n        throw error;\n      }\n    }, []);\n    const logout = (0, _react.useCallback)(async () => {\n      setState(prev => ({\n        ...prev,\n        isLoading: true\n      }));\n      try {\n        await _servicesApi.authApi.logout();\n      } finally {\n        setState({\n          user: null,\n          isLoading: false,\n          isAuthenticated: false\n        });\n      }\n    }, []);\n    const checkCanLogout = (0, _react.useCallback)(async () => {\n      try {\n        const response = await _servicesApi.authApi.checkCanLogout();\n        return response;\n      } catch (error) {\n        console.error('Failed to check logout status:', error);\n        // On error, allow logout (fail-safe)\n        return {\n          can_logout: true\n        };\n      }\n    }, []);\n    const refreshUser = (0, _react.useCallback)(async () => {\n      const user = await _servicesApi.authApi.getCurrentUser();\n      setState(prev => ({\n        ...prev,\n        user\n      }));\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        ...state,\n        login,\n        logout,\n        refreshUser,\n        checkCanLogout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"1X2zENDkf9inJ1iWKjuo1Lbt7lw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _default = AuthContext;\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":154,"map":[[6,26,1,0],[7,2,2,0],[8,2,2,0,"Object"],[8,8,2,0],[8,9,2,0,"defineProperty"],[8,23,2,0],[8,24,2,0,"exports"],[8,31,2,0],[9,4,2,0,"value"],[9,9,2,0],[10,2,2,0],[11,2,151,0,"Object"],[11,8,151,0],[11,9,151,0,"defineProperty"],[11,23,151,0],[11,24,151,0,"exports"],[11,31,151,0],[12,4,151,0,"enumerable"],[12,14,151,0],[13,4,151,0,"get"],[13,7,151,0],[13,18,151,0,"get"],[13,19,151,0],[14,6,151,0],[14,13,151,0,"_default"],[14,21,151,0],[15,4,151,0],[16,2,151,0],[17,2,35,0,"exports"],[17,9,35,0],[17,10,35,0,"AuthProvider"],[17,22,35,0],[17,25,35,0,"AuthProvider"],[17,37,35,0],[18,2,143,0,"exports"],[18,9,143,0],[18,10,143,0,"useAuth"],[18,17,143,0],[18,20,143,0,"useAuth"],[18,27,143,0],[19,2,4,0],[19,6,4,0,"_react"],[19,12,4,0],[19,15,4,0,"require"],[19,22,4,0],[19,23,4,0,"_dependencyMap"],[19,37,4,0],[20,2,6,0],[20,6,6,0,"_servicesApi"],[20,18,6,0],[20,21,6,0,"require"],[20,28,6,0],[20,29,6,0,"_dependencyMap"],[20,43,6,0],[21,2,6,52],[21,6,6,52,"_reactJsxDevRuntime"],[21,25,6,52],[21,28,6,52,"require"],[21,35,6,52],[21,36,6,52,"_dependencyMap"],[21,50,6,52],[22,2,29,0],[22,8,29,6,"AuthContext"],[22,19,29,17],[22,35,29,20],[22,39,29,20,"createContext"],[22,45,29,33],[22,46,29,33,"createContext"],[22,59,29,33],[22,61,29,63,"undefined"],[22,70,29,72],[22,71,29,73],[23,2,35,7],[23,11,35,16,"AuthProvider"],[23,23,35,28,"AuthProvider"],[23,24,35,29],[24,4,35,31,"children"],[25,2,35,59],[25,3,35,60],[25,5,35,62],[26,4,35,62,"_s"],[26,6,35,62],[27,4,36,2],[27,10,36,8],[27,11,36,9,"state"],[27,16,36,14],[27,18,36,16,"setState"],[27,26,36,24],[27,27,36,25],[27,30,36,28],[27,34,36,28,"useState"],[27,40,36,36],[27,41,36,36,"useState"],[27,49,36,36],[27,51,36,48],[28,6,37,4,"user"],[28,10,37,8],[28,12,37,10],[28,16,37,14],[29,6,38,4,"isLoading"],[29,15,38,13],[29,17,38,15],[29,21,38,19],[30,6,39,4,"isAuthenticated"],[30,21,39,19],[30,23,39,21],[31,4,40,2],[31,5,40,3],[31,6,40,4],[33,4,42,2],[34,4,43,2],[34,8,43,2,"useEffect"],[34,14,43,11],[34,15,43,11,"useEffect"],[34,24,43,11],[34,26,43,12],[34,32,43,18],[35,6,44,4,"checkAuthStatus"],[35,21,44,19],[35,22,44,20],[35,23,44,21],[36,4,45,2],[36,5,45,3],[36,7,45,5],[36,9,45,7],[36,10,45,8],[37,4,47,2],[37,10,47,8,"checkAuthStatus"],[37,25,47,23],[37,28,47,26],[37,34,47,26,"checkAuthStatus"],[37,35,47,26],[37,40,47,38],[38,6,48,4,"console"],[38,13,48,11],[38,14,48,12,"log"],[38,17,48,15],[38,18,48,16],[38,43,48,41],[38,44,48,42],[39,6,49,4],[39,10,49,8],[40,8,50,6],[40,14,50,12,"isAuth"],[40,20,50,18],[40,23,50,21],[40,29,50,27,"authApi"],[40,41,50,34],[40,42,50,34,"authApi"],[40,49,50,34],[40,50,50,35,"isAuthenticated"],[40,65,50,50],[40,66,50,51],[40,67,50,52],[41,8,51,6,"console"],[41,15,51,13],[41,16,51,14,"log"],[41,19,51,17],[41,20,51,18],[41,39,51,37],[41,41,51,39,"isAuth"],[41,47,51,45],[41,48,51,46],[42,8,52,6],[42,12,52,10,"isAuth"],[42,18,52,16],[42,20,52,18],[43,10,53,8],[43,16,53,14,"user"],[43,20,53,18],[43,23,53,21],[43,29,53,27,"authApi"],[43,41,53,34],[43,42,53,34,"authApi"],[43,49,53,34],[43,50,53,35,"getCurrentUser"],[43,64,53,49],[43,65,53,50],[43,66,53,51],[44,10,54,8,"console"],[44,17,54,15],[44,18,54,16,"log"],[44,21,54,19],[44,22,54,20],[44,35,54,33],[44,37,54,35,"user"],[44,41,54,39],[44,43,54,41,"email"],[44,48,54,46],[44,49,54,47],[45,10,55,8,"setState"],[45,18,55,16],[45,19,55,17],[46,12,56,10,"user"],[46,16,56,14],[47,12,57,10,"isLoading"],[47,21,57,19],[47,23,57,21],[47,28,57,26],[48,12,58,10,"isAuthenticated"],[48,27,58,25],[48,29,58,27],[48,30,58,28],[48,31,58,29,"user"],[49,10,59,8],[49,11,59,9],[49,12,59,10],[50,8,60,6],[50,9,60,7],[50,15,60,13],[51,10,61,8,"console"],[51,17,61,15],[51,18,61,16,"log"],[51,21,61,19],[51,22,61,20],[51,43,61,41],[51,44,61,42],[52,10,62,8,"setState"],[52,18,62,16],[52,19,62,17],[53,12,63,10,"user"],[53,16,63,14],[53,18,63,16],[53,22,63,20],[54,12,64,10,"isLoading"],[54,21,64,19],[54,23,64,21],[54,28,64,26],[55,12,65,10,"isAuthenticated"],[55,27,65,25],[55,29,65,27],[56,10,66,8],[56,11,66,9],[56,12,66,10],[57,8,67,6],[58,6,68,4],[58,7,68,5],[58,8,68,6],[58,15,68,13,"error"],[58,20,68,18],[58,22,68,20],[59,8,69,6,"console"],[59,15,69,13],[59,16,69,14,"error"],[59,21,69,19],[59,22,69,20],[59,42,69,40],[59,44,69,42,"error"],[59,49,69,47],[59,50,69,48],[60,8,70,6,"setState"],[60,16,70,14],[60,17,70,15],[61,10,71,8,"user"],[61,14,71,12],[61,16,71,14],[61,20,71,18],[62,10,72,8,"isLoading"],[62,19,72,17],[62,21,72,19],[62,26,72,24],[63,10,73,8,"isAuthenticated"],[63,25,73,23],[63,27,73,25],[64,8,74,6],[64,9,74,7],[64,10,74,8],[65,6,75,4],[66,4,76,2],[66,5,76,3],[67,4,78,2],[67,10,78,8,"login"],[67,15,78,13],[67,18,78,16],[67,22,78,16,"useCallback"],[67,28,78,27],[67,29,78,27,"useCallback"],[67,40,78,27],[67,42,78,28],[67,48,78,35,"credentials"],[67,59,78,60],[67,63,78,65],[68,6,79,4,"console"],[68,13,79,11],[68,14,79,12,"log"],[68,17,79,15],[68,18,79,16],[68,38,79,36],[68,40,79,38,"credentials"],[68,51,79,49],[68,52,79,50,"email"],[68,57,79,55],[68,58,79,56],[69,6,80,4,"setState"],[69,14,80,12],[69,15,80,13,"prev"],[69,19,80,17],[69,24,80,22],[70,8,80,24],[70,11,80,27,"prev"],[70,15,80,31],[71,8,80,33,"isLoading"],[71,17,80,42],[71,19,80,44],[72,6,80,49],[72,7,80,50],[72,8,80,51],[72,9,80,52],[73,6,82,4],[73,10,82,8],[74,8,83,6,"console"],[74,15,83,13],[74,16,83,14,"log"],[74,19,83,17],[74,20,83,18],[74,46,83,44],[74,47,83,45],[75,8,84,6],[75,14,84,12,"response"],[75,22,84,20],[75,25,84,23],[75,31,84,29,"authApi"],[75,43,84,36],[75,44,84,36,"authApi"],[75,51,84,36],[75,52,84,37,"login"],[75,57,84,42],[75,58,84,43,"credentials"],[75,69,84,54],[75,70,84,55],[76,8,85,6,"console"],[76,15,85,13],[76,16,85,14,"log"],[76,19,85,17],[76,20,85,18],[76,45,85,43],[76,47,85,45,"response"],[76,55,85,53],[76,56,85,54,"user"],[76,60,85,58],[76,62,85,60,"email"],[76,67,85,65],[76,68,85,66],[77,8,86,6,"setState"],[77,16,86,14],[77,17,86,15],[78,10,87,8,"user"],[78,14,87,12],[78,16,87,14,"response"],[78,24,87,22],[78,25,87,23,"user"],[78,29,87,27],[79,10,88,8,"isLoading"],[79,19,88,17],[79,21,88,19],[79,26,88,24],[80,10,89,8,"isAuthenticated"],[80,25,89,23],[80,27,89,25],[81,8,90,6],[81,9,90,7],[81,10,90,8],[82,6,91,4],[82,7,91,5],[82,8,91,6],[82,15,91,13,"error"],[82,20,91,18],[82,22,91,20],[83,8,92,6,"console"],[83,15,92,13],[83,16,92,14,"error"],[83,21,92,19],[83,22,92,20],[83,37,92,35],[83,39,92,37,"error"],[83,44,92,42],[83,45,92,43],[84,8,93,6,"setState"],[84,16,93,14],[84,17,93,15,"prev"],[84,21,93,19],[84,26,93,24],[85,10,93,26],[85,13,93,29,"prev"],[85,17,93,33],[86,10,93,35,"isLoading"],[86,19,93,44],[86,21,93,46],[87,8,93,52],[87,9,93,53],[87,10,93,54],[87,11,93,55],[88,8,94,6],[88,14,94,12,"error"],[88,19,94,17],[89,6,95,4],[90,4,96,2],[90,5,96,3],[90,7,96,5],[90,9,96,7],[90,10,96,8],[91,4,98,2],[91,10,98,8,"logout"],[91,16,98,14],[91,19,98,17],[91,23,98,17,"useCallback"],[91,29,98,28],[91,30,98,28,"useCallback"],[91,41,98,28],[91,43,98,29],[91,55,98,41],[92,6,99,4,"setState"],[92,14,99,12],[92,15,99,13,"prev"],[92,19,99,17],[92,24,99,22],[93,8,99,24],[93,11,99,27,"prev"],[93,15,99,31],[94,8,99,33,"isLoading"],[94,17,99,42],[94,19,99,44],[95,6,99,49],[95,7,99,50],[95,8,99,51],[95,9,99,52],[96,6,101,4],[96,10,101,8],[97,8,102,6],[97,14,102,12,"authApi"],[97,26,102,19],[97,27,102,19,"authApi"],[97,34,102,19],[97,35,102,20,"logout"],[97,41,102,26],[97,42,102,27],[97,43,102,28],[98,6,103,4],[98,7,103,5],[98,16,103,14],[99,8,104,6,"setState"],[99,16,104,14],[99,17,104,15],[100,10,105,8,"user"],[100,14,105,12],[100,16,105,14],[100,20,105,18],[101,10,106,8,"isLoading"],[101,19,106,17],[101,21,106,19],[101,26,106,24],[102,10,107,8,"isAuthenticated"],[102,25,107,23],[102,27,107,25],[103,8,108,6],[103,9,108,7],[103,10,108,8],[104,6,109,4],[105,4,110,2],[105,5,110,3],[105,7,110,5],[105,9,110,7],[105,10,110,8],[106,4,112,2],[106,10,112,8,"checkCanLogout"],[106,24,112,22],[106,27,112,25],[106,31,112,25,"useCallback"],[106,37,112,36],[106,38,112,36,"useCallback"],[106,49,112,36],[106,51,112,37],[106,63,112,77],[107,6,113,4],[107,10,113,8],[108,8,114,6],[108,14,114,12,"response"],[108,22,114,20],[108,25,114,23],[108,31,114,29,"authApi"],[108,43,114,36],[108,44,114,36,"authApi"],[108,51,114,36],[108,52,114,37,"checkCanLogout"],[108,66,114,51],[108,67,114,52],[108,68,114,53],[109,8,115,6],[109,15,115,13,"response"],[109,23,115,21],[110,6,116,4],[110,7,116,5],[110,8,116,6],[110,15,116,13,"error"],[110,20,116,18],[110,22,116,20],[111,8,117,6,"console"],[111,15,117,13],[111,16,117,14,"error"],[111,21,117,19],[111,22,117,20],[111,54,117,52],[111,56,117,54,"error"],[111,61,117,59],[111,62,117,60],[112,8,118,6],[113,8,119,6],[113,15,119,13],[114,10,119,15,"can_logout"],[114,20,119,25],[114,22,119,27],[115,8,119,32],[115,9,119,33],[116,6,120,4],[117,4,121,2],[117,5,121,3],[117,7,121,5],[117,9,121,7],[117,10,121,8],[118,4,123,2],[118,10,123,8,"refreshUser"],[118,21,123,19],[118,24,123,22],[118,28,123,22,"useCallback"],[118,34,123,33],[118,35,123,33,"useCallback"],[118,46,123,33],[118,48,123,34],[118,60,123,46],[119,6,124,4],[119,12,124,10,"user"],[119,16,124,14],[119,19,124,17],[119,25,124,23,"authApi"],[119,37,124,30],[119,38,124,30,"authApi"],[119,45,124,30],[119,46,124,31,"getCurrentUser"],[119,60,124,45],[119,61,124,46],[119,62,124,47],[120,6,125,4,"setState"],[120,14,125,12],[120,15,125,13,"prev"],[120,19,125,17],[120,24,125,22],[121,8,125,24],[121,11,125,27,"prev"],[121,15,125,31],[122,8,125,33,"user"],[123,6,125,38],[123,7,125,39],[123,8,125,40],[123,9,125,41],[124,4,126,2],[124,5,126,3],[124,7,126,5],[124,9,126,7],[124,10,126,8],[125,4,128,2],[125,24,129,4],[125,28,129,4,"_reactJsxDevRuntime"],[125,47,129,4],[125,48,129,4,"jsxDEV"],[125,54,129,4],[125,56,129,5,"AuthContext"],[125,67,129,16],[125,68,129,17,"Provider"],[125,76,129,25],[126,6,130,6,"value"],[126,11,130,11],[126,13,130,13],[127,8,131,8],[127,11,131,11,"state"],[127,16,131,16],[128,8,132,8,"login"],[128,13,132,13],[129,8,133,8,"logout"],[129,14,133,14],[130,8,134,8,"refreshUser"],[130,19,134,19],[131,8,135,8,"checkCanLogout"],[132,6,136,6],[132,7,136,8],[133,6,136,8,"children"],[133,14,136,8],[133,16,138,7,"children"],[134,4,138,15],[135,6,138,15,"fileName"],[135,14,138,15],[135,16,138,15,"_jsxFileName"],[135,28,138,15],[136,6,138,15,"lineNumber"],[136,16,138,15],[137,6,138,15,"columnNumber"],[137,18,138,15],[138,4,138,15],[138,11,139,26],[138,12,139,27],[139,2,141,0],[140,2,141,1,"_s"],[140,4,141,1],[140,5,35,16,"AuthProvider"],[140,17,35,28],[141,2,35,28,"_c"],[141,4,35,28],[141,7,35,16,"AuthProvider"],[141,19,35,28],[142,2,143,7],[142,11,143,16,"useAuth"],[142,18,143,23,"useAuth"],[142,19,143,23],[142,21,143,26],[143,4,143,26,"_s2"],[143,7,143,26],[144,4,144,2],[144,10,144,8,"context"],[144,17,144,15],[144,20,144,18],[144,24,144,18,"useContext"],[144,30,144,28],[144,31,144,28,"useContext"],[144,41,144,28],[144,43,144,29,"AuthContext"],[144,54,144,40],[144,55,144,41],[145,4,145,2],[145,8,145,6,"context"],[145,15,145,13],[145,20,145,18,"undefined"],[145,29,145,27],[145,31,145,29],[146,6,146,4],[146,12,146,10],[146,16,146,14,"Error"],[146,21,146,19],[146,22,146,20],[146,67,146,65],[146,68,146,66],[147,4,147,2],[148,4,148,2],[148,11,148,9,"context"],[148,18,148,16],[149,2,149,0],[150,2,149,1,"_s2"],[150,5,149,1],[150,6,143,16,"useAuth"],[150,13,143,23],[151,2,151,0],[151,6,151,0,"_default"],[151,14,151,0],[151,17,151,15,"AuthContext"],[151,28,151,26],[152,2,151,27],[152,6,151,27,"_c"],[152,8,151,27],[153,2,151,27,"$RefreshReg$"],[153,14,151,27],[153,15,151,27,"_c"],[153,17,151,27],[154,0,151,27],[154,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthStatus","login","setState$argument_0","logout","checkCanLogout","refreshUser","useAuth"],"mappings":"AAA;OCkC;YCQ;GDE;0BEE;GF6B;4BGE;aCE,sCD;eCa,uCD;GHG;6BKE;aDC,sCC;GLW;qCME;GNS;kCOE;aHE,2BG;GPC;CDe;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}